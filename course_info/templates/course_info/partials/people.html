{% verbatim %}
<nav>
  <h1>
    <a href="#/">Find Course</a>
    <small><i class="fa fa-chevron-right"></i></small>
    People in {{ title }}
  </h1>
</nav>


<main class="float=left col=60">
<div class="container-fluid">
  <div class="container-fluid">
    <div class="container">
      <!-- begin add people interface -->
      <div role="tabpanel" class="tab-pane active fade in active" id="people">
        <br />
        <button id="addPeopleBtn" class="btn btn-default" type="button" data-toggle="collapse"
                data-target="#addPeopleDialog" aria-expanded="false" aria-controls="addPeopleDialog">
          <i class="fa fa-navicon"></i> Add People <span class="caret"></span>
        </button>
        <div class="collapse" id="addPeopleDialog">
          <div class="well container-fluid col-md-12">
            <div class="form-group-inline">

              <div class="col-md-6">
                <div class="form-group">
                  <label class="sr-only" for="emailHUID">Enter Harvard University ID or email addresses</label>
                  <input class="form-control" id="emailHUID"
                         placeholder="Enter Harvard University ID or email addresses"
                         ng-model="searchTerm" ng-disabled="searchResults.length > 1">
                </div>
              </div>

              <div class="col-md-2">
                <button id="select-role-btn-id"
                        type="button"
                        class="btn btn-primary dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                        ng-disabled="searchTerm.length == 0 || searchResults.length > 1"
                        ng-bind-html="selectedRole.roleName + ' <span class=\'caret\'></span>'">
                </button>
                <ul class="dropdown-menu" role="menu"
                                          aria-labelledby="select-role-btn-id">
                  <li ng-repeat="role in roles">
                    <a ng-click="selectRole(role)">
                      {{ role.roleName }}
                    </a>
                  </li>
                </ul>
              </div>

              <div class="col-md-4">
                <button type="button" class="btn btn-default dropdown-toggle pull-right"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-info-circle"></i> Privacy Disclaimer <span class="caret"></span>
                </button>
                <ul class="dropdown-menu pull-right" style="width:30em; padding:1em;">
                  <li>The University has a legal responsibility to protect the privacy of students and the confidentiality of student records. Adding a member to the teaching staff of this course will allow them to view both "directory information" (i.e. student's name) and "non-directory information" (i.e. student's Harvard University ID#) for the students included in this course. The course list may include students who have asked that we not release any information about them, including the fact that they attend classes at Harvard. By adding a person to the teaching staff you are granting them access to view this information; others are not permitted to view these records. For these reasons, all members of the teaching staff should be reminded to keep this information confidential. If you have any questions, please contact the Office of the Registrar.</li>
                </ul>
              </div>
            </div>

            <div class="col-md-12" style="margin-bottom: 1em;">
              <a href="https://connections.harvard.edu" target="_blank">
                Go to the Harvard Directory
              </a>
              to find someone's official email address.
            </div>

            <!-- warning alerts -->
            <uib-alert ng-repeat="warning in warnings" type="warning"
                                                       close="closeAlert('warnings', $index)" class="col-md-12">
              <!-- user was already enrolled -->
              <div ng-if="warning.type == 'alreadyInCourse'">
                <p><strong>{{ warning.searchTerm }}</strong> was found in the course:</p>
                <p>{{ warning.fullName }} has the following email/id and role associated with this course:</p>
                <div ng-repeat="membership in warning.memberships"
                     style="border-style: solid; border-width: 1px 0px 1px 0px; border-color: #ccc; padding:.5em; margin-top:1em;">
                  {{ getProfileFullName(membership.profile) }}
                  <badge role="{{ membership.profile.role_type_cd }}"></badge> {{ membership.user_id }}
                  <strong>Enrolled as {{ membership.role.role_name }}</strong>
                </div>
              </div>

              <!-- search term didn't find a user -->
              <div ng-if="warning.type == 'notFound'">
                <p>
                <i class="fa fa-warning"></i>
                {{ warning.searchTerm }} was not found. Please check the email or Harvard University ID and try again.
                </p>
              </div>

              <div ng-if="warning.type == 'addFailed'">
                <p><strong>{{ warning.searchTerm }}</strong> could not be added to this course at this time.</p>
                <p>Please try again.</p>
              </div>
            </uib-alert>

            <!-- choose between multiple hits -->
            <div ng-show="searchResults.length > 1">
              <div class="row col-md-12">
                <h4>Some of the information you entered matches more than one record.</h4>
              </div>
              <form method="post" class="row col-md-12">
                <div class="radio">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>&nbsp;</th>
                        <th>Name</th>
                        <th>ID</th>
                        <th>Email</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="result in searchResults" class="">
                        <td scope="row">
                          <label>
                            <input type="radio" class="check_search"
                                   name="matching_records" id="add_person{{$index}}"
                                   ng-model="selectedResult.id" value="{{ result.univ_id }}">
                            <span class="sr-only">{{ result.name_last }}, {{ result.name_first }}</span>
                          </label>
                        </td>
                        <td>
                          <span>{{ result.name_last }}, {{ result.name_first }}</span>
                        </td>
                        <td>
                          <badge role="{{ result.role_type_cd }}"></badge> {{ result.univ_id }}
                        </td>
                        <td>
                          <span>{{ result.email_address }}</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </form>
            </div>

            <div class="col-md-12 row">
              <div class="col-md-2">
                <a id="add-user-btn-id"
                   class="btn btn-primary"
                   type="button"
                   ng-click="addUser(searchTerm)"
                   ng-disabled="disableAddUserButton()">
                  <i class="fa fa-plus-circle"></i> Add to Course
                </a>
              </div>

              <div class="col-md-2">
                <a id="cancel-add-user-btn-id"
                   class="btn btn-default"
                   type="button"
                   ng-click="clearSearchResults()"
                   ng-show="searchResults.length > 1">
                  Cancel
                </a>
              </div>
            </div>

            <div class="col-md-8 col-md-offset-2 hidden" style="padding-top: 1em"
                 ng-class="{'hidden': !searchInProgress}">
              <div class="progress">
                <div class="progress-bar progress-bar-success progress-bar-striped active"
                     role="progressbar" aria-valuenow="100" aria-valuemin="0"
                     aria-valuemax="100" style="width: 100%;">
                  <span class="sr-only">Search in progress</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end add people interface -->

      <h3>People in {{title}}</h3>

      <uib-alert id="success-alert" ng-repeat="person in successes" type="success"
                                                 close="closeAlert('successes', $index)" class="col-md-12">
        <p><strong>{{ searchTerm }}</strong> was just added to this course:</p>
        <div style="border-style: solid; border-width: 1px 0px 1px 0px; border-color: #ccc; padding:.5em; margin-top:1em;">
          {{ person.profile.name_last }}, {{ person.profile.name_first }}
          <badge role="{{ person.profile.role_type_cd }}"></badge> {{ person.profile.univ_id }}
          <strong>Enrolled as {{ person.role.role_name }}</strong>
        </div>
      </uib-alert>

      <!-- partial failure warning alerts -->
      <!-- TODO - remove these once the API is rolling back on canvas failure -->
      <uib-alert ng-repeat="partial in partialFailures" type="warning"
                                                        close="closeAlert('partialFailures', $index)" class="col-md-12">
        <p>While adding <strong>{{ partial.searchTerm }}</strong> to this course:</p>
        <p>{{ partial.text }}</p>
      </uib-alert>

      <table datatable="" dt-options="dtOptions" dt-columns="dtColumns"
                                                 dt-instance="dtInstance" class="table table-striped table-hover">
      </table>

    </div>
  </div>
</div>
</main>

{% endverbatim %}
