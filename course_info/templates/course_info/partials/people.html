{% verbatim %}

<nav>
  <h3>
    {% endverbatim %}
    <h3><a href="{% url 'dashboard_account' %}">Admin Console</a> > <a href="#/">Find Course</a>
    {% verbatim %}
    <small><i class="fa fa-chevron-right"></i></small>
    People in {{courseInstance.title}}
  </h3>
</nav>


<main class="float=left col=60">
<div class="container-fluid">
  <!-- begin add people interface -->
  <!-- begin add person expand-o-widget -->
  <div role="tabpanel" class="tab-pane active fade in active" id="people">
    <br />
    <button id="addPeopleBtn" class="btn btn-default" type="button"
            data-toggle="collapse" data-target="#addPeopleDialog"
            aria-expanded="false" aria-controls="addPeopleDialog">
       Add People <span class="caret"></span>
    </button>
    <div class="collapse" id="addPeopleDialog">
      <div class="well container-fluid col-md-12">
        <div class="form-group-inline">

          <div class="col-md-6">
            <div class="form-group">
              <label class="sr-only" for="emailHUID">Enter Harvard University ID or email addresses</label>
              <input class="form-control" id="emailHUID"
                     placeholder="Enter Harvard University ID or email addresses"
                     ng-model="searchTerm" ng-disabled="searchResults.length > 1">
            </div>
          </div>

          <div class="col-md-2">
            <button id="select-role-btn-id"
                    type="button"
                    class="btn btn-primary dropdown-toggle"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    ng-disabled="searchTerm.length == 0 || searchResults.length > 1"
                    ng-bind-html="selectedRole.roleName + ' <span class=\'caret\'></span>'">
            </button>
            <ul class="dropdown-menu" role="menu"
                aria-labelledby="select-role-btn-id">
              <li ng-repeat="role in roles">
                <a ng-click="selectRole(role)">
                  {{ role.roleName }}
                </a>
              </li>
            </ul>
          </div>

          <div class="col-md-4">
            <button type="button" class="btn btn-default dropdown-toggle pull-right"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-info-circle"></i> Privacy Disclaimer <span class="caret"></span>
            </button>
            <ul class="dropdown-menu pull-right" id="privacyDropdown">
              <li>The University has a legal responsibility to protect the privacy of students and the confidentiality of student records. Adding a member to the teaching staff of this course will allow them to view both "directory information" (i.e. student's name) and "non-directory information" (i.e. student's Harvard University ID#) for the students included in this course. The course list may include students who have asked that we not release any information about them, including the fact that they attend classes at Harvard. By adding a person to the teaching staff you are granting them access to view this information; others are not permitted to view these records. For these reasons, all members of the teaching staff should be reminded to keep this information confidential. If you have any questions, please contact the Office of the Registrar.</li>
            </ul>
          </div>
        </div>

        <div class="col-md-12" id="directoryLink">
          <a href="https://connections.harvard.edu" target="_blank">
            Go to the Harvard Directory
          </a>
          to find someone's official email address.
        </div>

        <!-- begin add warning alerts -->
        <uib-alert ng-repeat="warning in addWarnings" type="warning"
                   close="closeAlert('addWarnings', $index)" class="col-md-12">
          <div ng-switch on="warning.type">
            <!-- user was already enrolled -->
            <div ng-switch-when="alreadyInCourse">
              <p><strong>{{ warning.searchTerm }}</strong> was found in the course:</p>
              <p>{{ warning.fullName }} has the following email/id and role associated with this course:</p>
              <div ng-repeat="membership in warning.memberships" class="course-membership-entry">
                {{ warning.fullName }}
                <badge role="{{ membership.profile.role_type_cd }}"></badge> {{ membership.user_id }}
                <strong>Enrolled as {{ membership.role.role_name }}</strong>
              </div>
            </div>

            <!-- search term didn't find a user -->
            <div ng-switch-when="notFound">
              <p>{{ warning.searchTerm }} was not found. Please check the email
              or Harvard University ID and try again.</p>
            </div>

            <!-- server error when attempting to add the user -->
            <div ng-switch-when="addFailed">
              <p><strong>{{ warning.searchTerm }}</strong> could not be added to
              this course at this time.</p>
              <p>Please try again.</p>
            </div>
          </div>
        </uib-alert>
        <!-- end add warning alerts -->

        <!-- begin choose between multiple search hits -->
        <div ng-show="searchResults.length > 1">
          <div class="row col-md-12">
            <h4>Some of the information you entered matches more than one record.</h4>
          </div>
          <form method="post" class="row col-md-12">
            <div class="radio">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>&nbsp;</th>
                    <th>Name</th>
                    <th>ID</th>
                    <th>Email</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="result in searchResults" class="">
                    <td scope="row">
                      <label>
                        <input type="radio" class="check_search"
                               name="matching_records" id="add_person{{$index}}"
                               ng-model="selectedResult.id" value="{{ result.univ_id }}">
                        <span class="sr-only">{{ result.name_last }}, {{ result.name_first }}</span>
                      </label>
                    </td>
                    <td>
                      <span>{{ result.name_last }}, {{ result.name_first }}</span>
                    </td>
                    <td>
                      <badge role="{{ result.role_type_cd }}"></badge> {{ result.univ_id }}
                    </td>
                    <td>
                      <span>{{ result.email_address }}</span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </form>
        </div>
        <!-- end choose between multiple search hits -->

        <div class="col-md-12 row">
          <div class="col-md-2">
            <a id="add-user-btn-id"
               class="btn btn-primary"
               type="button"
               ng-click="addUser(searchTerm)"
               ng-disabled="disableAddUserButton()">
              <i class="fa fa-plus-circle"></i> Add to Course
            </a>
          </div>

          <div class="col-md-2">
            <a id="cancel-add-user-btn-id"
               class="btn btn-default"
               type="button"
               ng-click="clearSearchResults()"
               ng-show="searchResults.length > 1">
              Cancel
            </a>
          </div>
        </div>

        <div class="col-md-8 col-md-offset-2 hidden" id="progressBarOuterWrapper"
             ng-class="{'hidden': !searchInProgress}">
          <div class="progress">
            <div class="progress-bar progress-bar-success progress-bar-striped active"
                 role="progressbar" aria-valuenow="100" aria-valuemin="0"
                 aria-valuemax="100">
              <span class="sr-only">Search in progress</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- end add person expand-o-widget -->

  <!-- begin success alerts -->
  <uib-alert ng-repeat="person in successes" type="success"
             close="closeAlert('successes', $index)" class="col-md-12">
    <p><strong>{{ person.searchTerm }}</strong> was just {{ person.action }} this course:</p>
    <div class="course-membership-entry">
      {{ person.profile.name_last }}, {{ person.profile.name_first }}
      <badge role="{{ person.profile.role_type_cd }}"></badge> {{ person.profile.univ_id }}
      <strong>Enrolled as {{ person.role.role_name }}</strong>
    </div>
  </uib-alert>
  <!-- end success alerts -->

  <!-- begin add partial failure warning alerts -->
  <uib-alert ng-repeat="partial in addPartialFailures" type="warning"
             close="closeAlert('addPartialFailures', $index)" class="col-md-12">
    <p>While adding <strong>{{ partial.searchTerm }}</strong> to this course:</p>
    <p>{{ partial.text }}</p>
  </uib-alert>
  <!-- end add partial failure warning alerts -->

  <!-- begin remove failure warning alerts -->
  <uib-alert ng-repeat="failure in removeFailures" type="warning"
             close="closeAlert('removeFailures', $index)" class="col-md-12">
    <div ng-switch on="failure.type">
      <div ng-switch-when="noSuchUser">
        <strong>{{ failure.profile.name_last }}, {{ failure.profile.name_first }}</strong>
        has already been removed from this course.
      </div>
      <div ng-switch-when="noSuchCourse">
        <strong>{{ failure.profile.name_last }}, {{ failure.profile.name_first }}</strong>
        cannot be removed from this course because it no longer exists.
      </div>
      <div ng-switch-when="serverError">
        There was a problem removing <strong>{{ failure.profile.name_last }},
          {{ failure.profile.name_first }}</strong> from the database.  Please
        try again.  If the error persists, please contact your local school
        support staff.
      </div>
      <div ng-switch-when="canvasError">
        There was a problem removing <strong>{{ failure.profile.name_last }},
          {{ failure.profile.name_first }}</strong> from the Canvas site.  If the
        error persists, please contact your local school support staff.
      </div>
      <div ng-switch-default>
        There was a problem removing <strong>{{ failure.profile.name_last }},
          {{ failure.profile.name_first }}</strong>.  Please try again.  If the
        error persists, please contact your local school support staff.
      </div>
    </div>
    <div class="course-membership-entry">
      {{ failure.profile.name_last }}, {{ failure.profile.name_first }}
      <badge role="{{ failure.profile.role_type_cd }}"></badge> {{ failure.profile.univ_id }}
      <strong>Enrolled as {{ failure.role.role_name }}</strong>
    </div>
  </uib-alert>
  <!-- end remove failure warning alerts -->

  <!-- end add people interface -->

  <!-- begin course membership interface -->
  <h3>People in {{courseInstance.title}}</h3>

    <div class="col-md-12">
      <div id="courseInfoDT_wrapper" class="dataTables_wrapper form-inline no-footer">
        <!-- UI comment - inline style for a table border until table-box makes it to Bootrsap 4 -->
        <table id="courseInfoDT" class="display dataTable" cellspacing="0"
               role="grid" aria-describedby="courseInfoDT_info"
               style="width: 978px; border: solid 1px #ccc; margin-top: 1em;">
          <tbody>

            <tr role="row" class="odd">
               <td class="sorting" tabindex="0">{{courseInstance.school }}</td>
              <td class="sorting" tabindex="0">{{courseInstance.title }}</td>
              <td class="sorting" tabindex="0">{{courseInstance.term}}</td>
              <td class="sorting" tabindex="0">{{courseInstance.year}}</td>
              <td class="sorting" tabindex="0">{{courseInstance.sites}}</td>
              <td class="sorting" tabindex="0">{{courseInstance.registrar_code_display }}</td>
              <td class="sorting" tabindex="0">{{courseInstance.cid}}</td>
              <td class="sorting" tabindex="0">{{courseInstance.xlist_status}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


  <table datatable="" dt-options="dtOptions" dt-columns="dtColumns"
         dt-instance="dtInstance" class="table table-striped table-hover">
  </table>
  <!-- end course membership interface -->

</div>
</div>
</div>
</main>

{% endverbatim %}
