{% extends "qualtrics_whitelist/base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block title %}Edit a Person{% endblock %}
{% block pagetitle %}Edit Person{% endblock %}


{% block content %}
<h4>Update the reason and/or the access end date</h4>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form class="form-horizontal" name="form1" action="{% url 'qwl:access_update' %}" method="POST">{% csrf_token %}
<input type="hidden" name="id" value="{{ object.id }}" >
<input type="hidden" name="user_id" value="{{ object.user_id }}" >
<div class="form-group">
    	<label for="inputHUID" class="col-sm-2 control-label">HUID</label>
    	<div class="col-sm-10">
    		<p class="form-control-static">{{ object.user_id }}</p>
    	</div>
    </div>
    	<div class="form-group">
    	<label for="inputFirstName" class="col-sm-2 control-label">First Name</label>
    	<div class="col-sm-10">
    		<p class="form-control-static">{{ object.first_name }}</p>
    	</div>
    </div>
    <div class="form-group">
    	<label for="inputLastName" class="col-sm-2 control-label">Last Name</label>
    	<div class="col-sm-10">
    		<p class="form-control-static">{{ object.last_name }}</p>
    	</div>
    </div>
	<div class="form-group">
    	<label for="inputEmail" class="col-sm-2 control-label">Email</label>
    	<div class="col-sm-10">
    		<p class="form-control-static">{{ object.email_address }}</p>
    	</div>
    </div>
    <div class="form-group">
    	<label for="inputDescription" class="col-sm-2 control-label">Reason Description</label>
    	<div class="col-sm-10">
    		<input type="text" class="form-control" name="description"   value="{{ object.description }}">
    	</div>
    </div>
    <div class="form-group">
    	<label for="inputExpirationDate" class="col-sm-2 control-label">Access End Date</label>
    	<div class="col-sm-10">
    		<input type="text" class="dateinput" name="expiration_date"  value="{{ object.expiration_date | date:"Y-m-d" }}">
    	</div>
    </div>
    <div class="form-group">
		<div class="col-sm-offset-2 col-sm-10">
    		<button type="submit" class="btn btn-primary" name="Update" onclick="return checkReason()" >Update</button>
    		<button type="submit" class="btn btn-link" name="cancel">Cancel</button>
    	</div>
    </div>
</form>


{% endblock %}

{% block javascript %}
{{ block.super }}
<script>

$(document).ready(function() { 
	$('.dateinput').datepicker({
        format: "yyyy-mm-dd"
    });
});

function checkReason()
{
	if (!form1.description.value)
	{
		alert ("Please Enter a Reason description.");
		return false;
	}
	return true;
}
	
</script>

{% endblock %}